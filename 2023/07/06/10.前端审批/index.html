<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>BeiBei-Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="BeiBei-Blog"><meta name="msapplication-TileImage" content="https://moon-sea.oss-cn-shanghai.aliyuncs.com/blog_images/head.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="BeiBei-Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="# 云尚办公系统：员工端审批 # 一、功能说明 后台管理已经把审批都设计好了，员工就可以通过移动端提交需要的审批申请了，接下来就是 Activiti 审批的核心流程部分。审批负责人审批包含：审批通过与审批拒绝，审批通过后自动到下一个审批节点，审批拒绝直接到结束节点，流程结束。 # 二、员工端审批 # 1、OA 审批 OA 审批在移动端，公司员工使用，如图所示：  # 1.1、查询审批分类与模板接口"><meta property="og:type" content="blog"><meta property="og:title" content="BeiBei-Blog"><meta property="og:url" content="http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/"><meta property="og:site_name" content="BeiBei-Blog"><meta property="og:description" content="# 云尚办公系统：员工端审批 # 一、功能说明 后台管理已经把审批都设计好了，员工就可以通过移动端提交需要的审批申请了，接下来就是 Activiti 审批的核心流程部分。审批负责人审批包含：审批通过与审批拒绝，审批通过后自动到下一个审批节点，审批拒绝直接到结束节点，流程结束。 # 二、员工端审批 # 1、OA 审批 OA 审批在移动端，公司员工使用，如图所示：  # 1.1、查询审批分类与模板接口"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671502423642.png"><meta property="og:image" content="http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671677816503.png"><meta property="og:image" content="http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671678698916.png"><meta property="og:image" content="http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671678754144.png"><meta property="og:image" content="http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671678840138.png"><meta property="og:image" content="http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671678899410.png"><meta property="og:image" content="http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671585994063.png"><meta property="article:published_time" content="2023-07-06T08:39:47.634Z"><meta property="article:modified_time" content="2023-02-16T06:05:38.346Z"><meta property="article:author" content="John Doe"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671502423642.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/"},"headline":"BeiBei-Blog","image":["http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671502423642.png","http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671677816503.png","http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671678698916.png","http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671678754144.png","http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671678840138.png","http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671678899410.png","http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/assets/1671585994063.png"],"datePublished":"2023-07-06T08:39:47.634Z","dateModified":"2023-02-16T06:05:38.346Z","author":{"@type":"Person","name":"John Doe"},"publisher":{"@type":"Organization","name":"BeiBei-Blog","logo":{"@type":"ImageObject","url":"https://moon-sea.oss-cn-shanghai.aliyuncs.com/blog_images/head.png"}},"description":"# 云尚办公系统：员工端审批 # 一、功能说明 后台管理已经把审批都设计好了，员工就可以通过移动端提交需要的审批申请了，接下来就是 Activiti 审批的核心流程部分。审批负责人审批包含：审批通过与审批拒绝，审批通过后自动到下一个审批节点，审批拒绝直接到结束节点，流程结束。 # 二、员工端审批 # 1、OA 审批 OA 审批在移动端，公司员工使用，如图所示：  # 1.1、查询审批分类与模板接口"}</script><link rel="canonical" href="http://example.com/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/"><link rel="icon" href="https://moon-sea.oss-cn-shanghai.aliyuncs.com/blog_images/head.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://moon-sea.oss-cn-shanghai.aliyuncs.com/blog_images/head.png" alt="BeiBei-Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">文章列表</a><a class="navbar-item" href="/tags">标签</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/zhengyaok"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-07-06T08:39:47.634Z" title="2023/7/6 下午4:39:47">2023-07-06</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-02-16T06:05:38.346Z" title="2023/2/16 下午2:05:38">2023-02-16</time></span><span class="level-item">38 minutes read (About 5629 words)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><div class="content"><h1 id="云尚办公系统员工端审批"><a class="markdownIt-Anchor" href="#云尚办公系统员工端审批">#</a> 云尚办公系统：员工端审批</h1>
<h2 id="一-功能说明"><a class="markdownIt-Anchor" href="#一-功能说明">#</a> 一、功能说明</h2>
<p>后台管理已经把审批都设计好了，员工就可以通过移动端提交需要的审批申请了，接下来就是 Activiti 审批的核心流程部分。审批负责人审批包含：审批通过与审批拒绝，审批通过后自动到下一个审批节点，审批拒绝直接到结束节点，流程结束。</p>
<h2 id="二-员工端审批"><a class="markdownIt-Anchor" href="#二-员工端审批">#</a> 二、员工端审批</h2>
<h3 id="1-oa审批"><a class="markdownIt-Anchor" href="#1-oa审批">#</a> 1、OA 审批</h3>
<p>OA 审批在移动端，公司员工使用，如图所示：</p>
<p><img src="assets/1671502423642.png" alt="67150242364"></p>
<h4 id="11-查询审批分类与模板接口"><a class="markdownIt-Anchor" href="#11-查询审批分类与模板接口">#</a> 1.1、查询审批分类与模板接口</h4>
<p>获取审批分类与对应的审批模板</p>
<h5 id="111-定义service接口"><a class="markdownIt-Anchor" href="#111-定义service接口">#</a> 1.1.1、定义 service 接口</h5>
<p>操作类：ProcessTypeService</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;ProcessType&gt; <span class="title function_">findProcessType</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<h5 id="112-service接口实现"><a class="markdownIt-Anchor" href="#112-service接口实现">#</a> 1.1.2、service 接口实现</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ProcessTemplateService processTemplateService;</span><br><span class="line">	</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;ProcessType&gt; <span class="title function_">findProcessType</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//1 查询所有审批分类，返回list集合</span></span><br><span class="line">    List&lt;ProcessType&gt; processTypeList = baseMapper.selectList(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2 遍历返回所有审批分类list集合</span></span><br><span class="line">    <span class="keyword">for</span> (ProcessType processType:processTypeList) &#123;</span><br><span class="line">        <span class="comment">//3 得到每个审批分类，根据审批分类id查询对应审批模板</span></span><br><span class="line">        <span class="comment">//审批分类id</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">typeId</span> <span class="operator">=</span> processType.getId();</span><br><span class="line">        <span class="comment">//根据审批分类id查询对应审批模板</span></span><br><span class="line">        LambdaQueryWrapper&lt;ProcessTemplate&gt; wrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        wrapper.eq(ProcessTemplate::getProcessTypeId,typeId);</span><br><span class="line">        List&lt;ProcessTemplate&gt; processTemplateList = processTemplateService.list(wrapper);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4 根据审批分类id查询对应审批模板数据（List）封装到每个审批分类对象里面</span></span><br><span class="line">        processType.setProcessTemplateList(processTemplateList);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> processTypeList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="113-controller接口"><a class="markdownIt-Anchor" href="#113-controller接口">#</a> 1.1.3、controller 接口</h5>
<p>创建类 ProcessApiController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Api(tags = &quot;审批流管理&quot;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(value=&quot;/admin/process&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span>  <span class="comment">//跨域</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProcessApiController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ProcessTypeService processTypeService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;获取全部审批分类及模板&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;findProcessType&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">findProcessType</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> Result.ok(processTypeService.findProcessType());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="12-前端开发"><a class="markdownIt-Anchor" href="#12-前端开发">#</a> 1.2、前端开发</h4>
<h5 id="121-引用前端开发环境"><a class="markdownIt-Anchor" href="#121-引用前端开发环境">#</a> 1.2.1、引用前端开发环境</h5>
<p>从资源库引入前端项目框架：guigu-oa-web，该框架包含了静态资源页面，我们直接使用。</p>
<p>第一步：安装依赖</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>第二步：启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure>
<p>第三步：更改配置</p>
<p>1、更改 src/utils/request.js 文件 api base 路径</p>
<p>2、更改 src/utils/request.js 文件 token 信息，</p>
<p><strong>在 idea 使用 token 工具生成临时 token 使用，后续会完善微信授权登录</strong></p>
<p><img src="assets/1671677816503.png" alt="67167781650"></p>
<h5 id="122-定义api接口"><a class="markdownIt-Anchor" href="#122-定义api接口">#</a> 1.2.2、定义 api 接口</h5>
<p>创建 src/api/process.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> api_name = <span class="string">&#x27;/admin/process&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">findProcessType</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`<span class="subst">$&#123;api_name&#125;</span>/findProcessType`</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="123-添加路由"><a class="markdownIt-Anchor" href="#123-添加路由">#</a> 1.2.3、添加路由</h5>
<p>在 src/router/index.js 添加路由</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;OA审批&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span></span><br><span class="line">    <span class="keyword">import</span>(<span class="string">&#x27;../views/index.vue&#x27;</span>),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="124-页面渲染"><a class="markdownIt-Anchor" href="#124-页面渲染">#</a> 1.2.4、页面渲染</h5>
<p><strong>views/index.vue 页面</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;van-nav-bar</span><br><span class="line">        title=&quot;OA审批&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;van-collapse v-model=&quot;activeNames&quot;&gt;</span><br><span class="line">        &lt;van-collapse-item</span><br><span class="line">          v-for=&quot;(item,key) in list&quot;</span><br><span class="line">          :title=&quot;item.name&quot;</span><br><span class="line">          :name=&quot;item.key&quot;&gt;</span><br><span class="line">          &lt;van-row&gt;</span><br><span class="line">            &lt;van-col v-for=&quot;template in item.processTemplateList&quot; :key=&quot;template.id&quot; span=&quot;6&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;item&quot; @click=&quot;apply(template.id)&quot;&gt;</span><br><span class="line">                &lt;img :src=&quot;template.iconUrl&quot;/&gt;</span><br><span class="line">                &lt;span&gt;&#123;&#123;template.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/van-col&gt;</span><br><span class="line">          &lt;/van-row&gt;</span><br><span class="line">        &lt;/van-collapse-item&gt;</span><br><span class="line">      &lt;/van-collapse&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import api from &#x27;@/api/process&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;process&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      list: [],</span><br><span class="line">      activeNames: [0,1,2,3,4]</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  created()&#123;</span><br><span class="line">    this.fetchData();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    fetchData() &#123;</span><br><span class="line">      api.findProcessType().then(response =&gt; &#123;</span><br><span class="line">        console.log(response.data);</span><br><span class="line">        this.list = response.data;</span><br><span class="line">        //全部展开</span><br><span class="line">        this.activeNames = []</span><br><span class="line">        this.list.forEach((item,index) =&gt; &#123;</span><br><span class="line">          this.activeNames.push(index)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    apply(id) &#123;</span><br><span class="line">      this.$router.push(&#123; path: &#x27;/apply/&#x27;+id &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  padding-bottom: 50px;</span><br><span class="line">  .item &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    align-items: center;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    img &#123;</span><br><span class="line">      width: 40px;</span><br><span class="line">      height: 40px;</span><br><span class="line">      border-radius: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">    span &#123;</span><br><span class="line">      font-size: 12px;</span><br><span class="line">      padding: 8px 4px;</span><br><span class="line">      text-align: center;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="2-审批申请"><a class="markdownIt-Anchor" href="#2-审批申请">#</a> 2、审批申请</h3>
<p>根据审批模板渲染动态表单，根据动态表单启动流程实例</p>
<h4 id="21-获取审批模板数据"><a class="markdownIt-Anchor" href="#21-获取审批模板数据">#</a> 2.1、获取审批模板数据</h4>
<p>操作类：ProcessApiController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ProcessTemplateService processTemplateService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiOperation(value = &quot;获取审批模板&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getProcessTemplate/&#123;processTemplateId&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">get</span><span class="params">(<span class="meta">@PathVariable</span> Long processTemplateId)</span> &#123;</span><br><span class="line">   <span class="type">ProcessTemplate</span> <span class="variable">processTemplate</span> <span class="operator">=</span> processTemplateService.getById(processTemplateId);</span><br><span class="line">   <span class="keyword">return</span> Result.ok(processTemplate);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="22-审批申请页面渲染"><a class="markdownIt-Anchor" href="#22-审批申请页面渲染">#</a> 2.2、审批申请页面渲染</h4>
<h5 id="221-定义接口"><a class="markdownIt-Anchor" href="#221-定义接口">#</a> 2.2.1、定义接口</h5>
<p>在 src/api/process.js 文件添加接口</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getProcessTemplate</span>(<span class="params">processTemplateId</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`<span class="subst">$&#123;api_name&#125;</span>/getProcessTemplate/`</span>+processTemplateId,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="222-渲染动态表单"><a class="markdownIt-Anchor" href="#222-渲染动态表单">#</a> 2.2.2、渲染动态表单</h5>
<p>初始化环境已集成：form-create 组件，我们将表单设计器组件保存的数据直接渲染即可</p>
<p>创建 src/views/apply.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-nav-bar</span><br><span class="line">      title=&quot;发起审批&quot;</span><br><span class="line">      left-text=&quot;返回&quot;</span><br><span class="line">      left-arrow</span><br><span class="line">      @click-left=&quot;() =&gt; $router.back()&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;div style=&quot;margin: 10px 10px 0 0;border: 0px solid red;&quot;&gt;</span><br><span class="line">    &lt;form-create</span><br><span class="line">      :rule=&quot;rule&quot;</span><br><span class="line">      :option=&quot;option&quot;</span><br><span class="line">      @submit=&quot;onSubmit&quot;</span><br><span class="line">    &gt;&lt;/form-create&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import api from &quot;@/api/process&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;process&quot;,</span><br><span class="line"></span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      processTemplateprocessTemplate: null,</span><br><span class="line">      rule: [],</span><br><span class="line">      option: &#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  created() &#123;</span><br><span class="line">    let processTemplateId = this.$route.params.processTemplateId;</span><br><span class="line">    this.fetchData(processTemplateId);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  methods: &#123;</span><br><span class="line">    fetchData(processTemplateId) &#123;</span><br><span class="line">      api.getProcessTemplate(processTemplateId).then(response =&gt; &#123;</span><br><span class="line">        console.log(response.data);</span><br><span class="line">        this.processTemplate = response.data;</span><br><span class="line"></span><br><span class="line">        this.rule = JSON.parse(this.processTemplate.formProps);</span><br><span class="line">        this.option = JSON.parse(this.processTemplate.formOptions);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    onSubmit(formData) &#123;</span><br><span class="line">		console.log(formData)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.el-form &#123;</span><br><span class="line">  .el-form-item &#123;</span><br><span class="line">    /deep/ .el-form-item__label &#123;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">      font-weight: 800;</span><br><span class="line">      color: blue;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h5 id="223-测试"><a class="markdownIt-Anchor" href="#223-测试">#</a> 2.2.3、测试</h5>
<p>我们以加班为例，其他都可以</p>
<p><img src="assets/1671678698916.png" alt="67167869891"></p>
<p>提交打印数据：</p>
<p><img src="assets/1671678754144.png" alt="67167875414"></p>
<p>打印数据为我们自定义表单属性与对于输入值。</p>
<p>后续这些数据有两方面用途：</p>
<p>​	1、审批详细展示</p>
<p>​	2、作为流程实例参数，判断流程走向，如下图：</p>
<p><img src="assets/1671678840138.png" alt="67167884013"></p>
<h5 id="224-封装提交数据"><a class="markdownIt-Anchor" href="#224-封装提交数据">#</a> 2.2.4、封装提交数据</h5>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onSubmit</span>(<span class="params">formData</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(formData)</span><br><span class="line">  <span class="keyword">let</span> formShowData = &#123;&#125;;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">rule</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> formData) &#123;</span><br><span class="line">      <span class="keyword">if</span> (key === item.<span class="property">field</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(item.<span class="property">title</span>, formData[key]);</span><br><span class="line">        formShowData[item.<span class="property">title</span>] = formData[key];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">let</span> <span class="variable constant_">DATA</span> = &#123;</span><br><span class="line">    <span class="attr">formData</span>: formData,</span><br><span class="line">    <span class="attr">formShowData</span>: formShowData</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">DATA</span>);</span><br><span class="line">  <span class="keyword">let</span> processFormVo = &#123;</span><br><span class="line">    <span class="string">&quot;processTemplateId&quot;</span>: <span class="variable language_">this</span>.<span class="property">processTemplate</span>.<span class="property">id</span>,</span><br><span class="line">    <span class="string">&quot;processTypeId&quot;</span>: <span class="variable language_">this</span>.<span class="property">processTemplate</span>.<span class="property">processTypeId</span>,</span><br><span class="line">    <span class="string">&quot;formValues&quot;</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable constant_">DATA</span>)</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(processFormVo)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>打印数据</p>
<p><img src="assets/1671678899410.png" alt="67167889941"></p>
<p>我们把表单数据转换 2 部分：formData 表单数据，formShowData 表单展示数据，构造成为一个 formValues 属性 json 对象，后续使用时可方便获取</p>
<h4 id="23-启动流程实例"><a class="markdownIt-Anchor" href="#23-启动流程实例">#</a> 2.3、启动流程实例</h4>
<h5 id="231-修改认证过滤器"><a class="markdownIt-Anchor" href="#231-修改认证过滤器">#</a> 2.3.1、修改认证过滤器</h5>
<p><strong>spring-security 模块添加工具类，通过 ThreadLocal 记录当前登录人信息</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.security.custom;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取当前用户信息帮助类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginUserInfoHelper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;Long&gt; userId = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;Long&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;String&gt; username = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">setUserId</span><span class="params">(Long _userId)</span> &#123;</span><br><span class="line">        userId.set(_userId);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title function_">getUserId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userId.get();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">removeUserId</span><span class="params">()</span> &#123;</span><br><span class="line">        userId.remove();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String _username)</span> &#123;</span><br><span class="line">        username.set(_username);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username.get();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">removeUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        username.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>修改过滤器 TokenAuthenticationFilter</strong></p>
<p>添加以下内容</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 认证解析token过滤器</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenAuthenticationFilter</span> <span class="keyword">extends</span> <span class="title class_">OncePerRequestFilter</span> &#123;</span><br><span class="line"></span><br><span class="line">...................</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> UsernamePasswordAuthenticationToken <span class="title function_">getAuthentication</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">    </span><br><span class="line">        ....................</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (!StringUtils.isEmpty(username)) &#123;</span><br><span class="line">                <span class="comment">//通过ThreadLocal记录当前登录人信息</span></span><br><span class="line">                LoginUserInfoHelper.setUserId(JwtHelper.getUserId(token));</span><br><span class="line">                LoginUserInfoHelper.setUsername(username);</span><br><span class="line">                </span><br><span class="line">        ....................</span><br><span class="line">            </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="232-封装启动流程对象"><a class="markdownIt-Anchor" href="#232-封装启动流程对象">#</a> 2.3.2、封装启动流程对象</h5>
<p>对于审批申请属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel(description = &quot;流程表单&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProcessFormVo</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@ApiModelProperty(value = &quot;审批模板id&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> Long processTemplateId;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@ApiModelProperty(value = &quot;审批类型id&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> Long processTypeId;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@ApiModelProperty(value = &quot;表单值&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> String formValues;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="233-service实现功能"><a class="markdownIt-Anchor" href="#233-service实现功能">#</a> 2.3.3、service 实现功能</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ProcessTemplateService processTemplateService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> SysUserService sysUserService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> RuntimeService runtimeService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> TaskService taskService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">startUp</span><span class="params">(ProcessFormVo processFormVo)</span> &#123;</span><br><span class="line">    <span class="type">SysUser</span> <span class="variable">sysUser</span> <span class="operator">=</span> sysUserService.getById(LoginUserInfoHelper.getUserId());</span><br><span class="line"></span><br><span class="line">    <span class="type">ProcessTemplate</span> <span class="variable">processTemplate</span> <span class="operator">=</span> processTemplateService.getById(processFormVo.getProcessTemplateId());</span><br><span class="line">    <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Process</span>();</span><br><span class="line">    BeanUtils.copyProperties(processFormVo, process);</span><br><span class="line">    <span class="type">String</span> <span class="variable">workNo</span> <span class="operator">=</span> System.currentTimeMillis() + <span class="string">&quot;&quot;</span>;</span><br><span class="line">    process.setProcessCode(workNo);</span><br><span class="line">    process.setUserId(LoginUserInfoHelper.getUserId());</span><br><span class="line">    process.setFormValues(processFormVo.getFormValues());</span><br><span class="line">    process.setTitle(sysUser.getName() + <span class="string">&quot;发起&quot;</span> + processTemplate.getName() + <span class="string">&quot;申请&quot;</span>);</span><br><span class="line">    process.setStatus(<span class="number">1</span>);</span><br><span class="line">    processMapper.insert(process);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//绑定业务id</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">businessKey</span> <span class="operator">=</span> String.valueOf(process.getId());</span><br><span class="line">    <span class="comment">//流程参数</span></span><br><span class="line">    Map&lt;String, Object&gt; variables = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//将表单数据放入流程实例中</span></span><br><span class="line">    <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(process.getFormValues());</span><br><span class="line">    <span class="type">JSONObject</span> <span class="variable">formData</span> <span class="operator">=</span> jsonObject.getJSONObject(<span class="string">&quot;formData&quot;</span>);</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//循环转换</span></span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;String, Object&gt; entry : formData.entrySet()) &#123;</span><br><span class="line">        map.put(entry.getKey(), entry.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">    variables.put(<span class="string">&quot;data&quot;</span>, map);</span><br><span class="line">    <span class="type">ProcessInstance</span> <span class="variable">processInstance</span> <span class="operator">=</span> runtimeService.startProcessInstanceByKey(processTemplate.getProcessDefinitionKey(), businessKey, variables);</span><br><span class="line">    <span class="comment">//业务表关联当前流程实例id</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">processInstanceId</span> <span class="operator">=</span> processInstance.getId();</span><br><span class="line">    process.setProcessInstanceId(processInstanceId);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//计算下一个审批人，可能有多个（并行审批）</span></span><br><span class="line">    List&lt;Task&gt; taskList = <span class="built_in">this</span>.getCurrentTaskList(processInstanceId);</span><br><span class="line">    <span class="keyword">if</span> (!CollectionUtils.isEmpty(taskList)) &#123;</span><br><span class="line">        List&lt;String&gt; assigneeList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(Task task : taskList) &#123;</span><br><span class="line">            <span class="type">SysUser</span> <span class="variable">user</span> <span class="operator">=</span> sysUserService.getByUsername(task.getAssignee());</span><br><span class="line">            assigneeList.add(user.getName());</span><br><span class="line"></span><br><span class="line">            <span class="comment">//推送消息给下一个审批人，后续完善</span></span><br><span class="line">        &#125;</span><br><span class="line">        process.setDescription(<span class="string">&quot;等待&quot;</span> + StringUtils.join(assigneeList.toArray(), <span class="string">&quot;,&quot;</span>) + <span class="string">&quot;审批&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    processMapper.updateById(process);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取当前任务列表</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> processInstanceId</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> List&lt;Task&gt; <span class="title function_">getCurrentTaskList</span><span class="params">(String processInstanceId)</span> &#123;</span><br><span class="line">    List&lt;Task&gt; tasks = taskService.createTaskQuery().processInstanceId(processInstanceId).list();</span><br><span class="line">    <span class="keyword">return</span> tasks;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="234-controller接口"><a class="markdownIt-Anchor" href="#234-controller接口">#</a> 2.3.4、controller 接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ProcessService processService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiOperation(value = &quot;启动流程&quot;)</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/startUp&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">start</span><span class="params">(<span class="meta">@RequestBody</span> ProcessFormVo processFormVo)</span> &#123;</span><br><span class="line">   processService.startUp(processFormVo);</span><br><span class="line">   <span class="keyword">return</span> Result.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="24-更新前端提交接口"><a class="markdownIt-Anchor" href="#24-更新前端提交接口">#</a> 2.4、更新前端提交接口</h4>
<p>1、添加 api 接口</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">startUp</span>(<span class="params">processFormVo</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`<span class="subst">$&#123;api_name&#125;</span>/startUp`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: processFormVo</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>2、更新提交接口</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onSubmit</span>(<span class="params">formData</span>) &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(processFormVo)</span><br><span class="line">  api.<span class="title function_">startUp</span>(processFormVo).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//调整到已发起列表</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">&quot;/list/2&quot;</span> &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="25-记录提交记录"><a class="markdownIt-Anchor" href="#25-记录提交记录">#</a> 2.5、记录提交记录</h4>
<p>类似下面数据</p>
<p><img src="assets/1671585994063.png" alt="67158599406"></p>
<p>每个节点我们要记录操作行为</p>
<h5 id="251-mapper类"><a class="markdownIt-Anchor" href="#251-mapper类">#</a> 2.5.1、mapper 类</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.process.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.model.process.ProcessRecord;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProcessRecordMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;ProcessRecord&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="252-service接口"><a class="markdownIt-Anchor" href="#252-service接口">#</a> 2.5.2、service 接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.process.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.model.process.ProcessRecord;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProcessRecordService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;ProcessRecord&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">record</span><span class="params">(Long processId, Integer status, String description)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="253-service接口"><a class="markdownIt-Anchor" href="#253-service接口">#</a> 2.5.3、service 接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.process.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.model.process.ProcessRecord;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.model.system.SysUser;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.process.mapper.ProcessRecordMapper;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.process.service.ProcessRecordService;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.security.custom.LoginUserInfoHelper;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.system.service.SysUserService;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;unchecked&quot;, &quot;rawtypes&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProcessRecordServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;ProcessRecordMapper, ProcessRecord&gt; <span class="keyword">implements</span> <span class="title class_">ProcessRecordService</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> ProcessRecordMapper processRecordMapper;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> SysUserService sysUserService;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">record</span><span class="params">(Long processId, Integer status, String description)</span> &#123;</span><br><span class="line">      <span class="type">SysUser</span> <span class="variable">sysUser</span> <span class="operator">=</span> sysUserService.getById(LoginUserInfoHelper.getUserId());</span><br><span class="line">      <span class="type">ProcessRecord</span> <span class="variable">processRecord</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessRecord</span>();</span><br><span class="line">      processRecord.setProcessId(processId);</span><br><span class="line">      processRecord.setStatus(status);</span><br><span class="line">      processRecord.setDescription(description);</span><br><span class="line">      processRecord.setOperateUserId(sysUser.getId());</span><br><span class="line">      processRecord.setOperateUser(sysUser.getName());</span><br><span class="line">      processRecordMapper.insert(processRecord);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="254-更改启动流程接口"><a class="markdownIt-Anchor" href="#254-更改启动流程接口">#</a> 2.5.4、更改启动流程接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ProcessRecordService processRecordService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">startUp</span><span class="params">(ProcessFormVo processFormVo)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">//记录操作行为</span></span><br><span class="line">    processRecordService.record(process.getId(), <span class="number">1</span>, <span class="string">&quot;发起申请&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-待处理列表"><a class="markdownIt-Anchor" href="#3-待处理列表">#</a> 3、待处理列表</h3>
<p>启动流程后，审批人就可以在待处理列表中获取审批列表了</p>
<h4 id="31-服务器端接口"><a class="markdownIt-Anchor" href="#31-服务器端接口">#</a> 3.1、服务器端接口</h4>
<h5 id="311-定义接口"><a class="markdownIt-Anchor" href="#311-定义接口">#</a> 3.1.1、定义接口</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IPage&lt;ProcessVo&gt; findPending(Page&lt;Process&gt; pageParam);</span><br></pre></td></tr></table></figure>
<h5 id="312-接口实现"><a class="markdownIt-Anchor" href="#312-接口实现">#</a> 3.1.2、接口实现</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> IPage&lt;ProcessVo&gt; <span class="title function_">findPending</span><span class="params">(Page&lt;Process&gt; pageParam)</span> &#123;</span><br><span class="line">    <span class="comment">// 根据当前人的ID查询</span></span><br><span class="line">    <span class="type">TaskQuery</span> <span class="variable">query</span> <span class="operator">=</span> taskService.createTaskQuery().taskAssignee(LoginUserInfoHelper.getUsername()).orderByTaskCreateTime().desc();</span><br><span class="line">    List&lt;Task&gt; list = query.listPage((<span class="type">int</span>) ((pageParam.getCurrent() - <span class="number">1</span>) * pageParam.getSize()), (<span class="type">int</span>) pageParam.getSize());</span><br><span class="line">    <span class="type">long</span> <span class="variable">totalCount</span> <span class="operator">=</span> query.count();</span><br><span class="line"></span><br><span class="line">    List&lt;ProcessVo&gt; processList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// 根据流程的业务ID查询实体并关联</span></span><br><span class="line">    <span class="keyword">for</span> (Task item : list) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">processInstanceId</span> <span class="operator">=</span> item.getProcessInstanceId();</span><br><span class="line">        <span class="type">ProcessInstance</span> <span class="variable">processInstance</span> <span class="operator">=</span> runtimeService.createProcessInstanceQuery().processInstanceId(processInstanceId).singleResult();</span><br><span class="line">        <span class="keyword">if</span> (processInstance == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 业务key</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">businessKey</span> <span class="operator">=</span> processInstance.getBusinessKey();</span><br><span class="line">        <span class="keyword">if</span> (businessKey == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> <span class="built_in">this</span>.getById(Long.parseLong(businessKey));</span><br><span class="line">        <span class="type">ProcessVo</span> <span class="variable">processVo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessVo</span>();</span><br><span class="line">        BeanUtils.copyProperties(process, processVo);</span><br><span class="line">        processVo.setTaskId(item.getId());</span><br><span class="line">        processList.add(processVo);</span><br><span class="line">    &#125;</span><br><span class="line">    IPage&lt;ProcessVo&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;ProcessVo&gt;(pageParam.getCurrent(), pageParam.getSize(), totalCount);</span><br><span class="line">    page.setRecords(processList);</span><br><span class="line">    <span class="keyword">return</span> page;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="313-controller接口"><a class="markdownIt-Anchor" href="#313-controller接口">#</a> 3.1.3、controller 接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(value = &quot;待处理&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/findPending/&#123;page&#125;/&#123;limit&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">findPending</span><span class="params">(</span></span><br><span class="line"><span class="params">      <span class="meta">@ApiParam(name = &quot;page&quot;, value = &quot;当前页码&quot;, required = true)</span></span></span><br><span class="line"><span class="params">      <span class="meta">@PathVariable</span> Long page,</span></span><br><span class="line"><span class="params"></span></span><br><span class="line"><span class="params">      <span class="meta">@ApiParam(name = &quot;limit&quot;, value = &quot;每页记录数&quot;, required = true)</span></span></span><br><span class="line"><span class="params">      <span class="meta">@PathVariable</span> Long limit)</span> &#123;</span><br><span class="line">   Page&lt;Process&gt; pageParam = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(page, limit);</span><br><span class="line">   <span class="keyword">return</span> Result.ok(processService.findPending(pageParam));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="32-前端渲染"><a class="markdownIt-Anchor" href="#32-前端渲染">#</a> 3.2、前端渲染</h4>
<h5 id="321-定义api接口"><a class="markdownIt-Anchor" href="#321-定义api接口">#</a> 3.2.1、定义 api 接口</h5>
<p>在 src/api/process.js 添加接口</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">findPending</span>(<span class="params">page, limit</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`<span class="subst">$&#123;api_name&#125;</span>/findPending/`</span>+page+<span class="string">`/`</span>+ limit,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h5 id="322-添加路由"><a class="markdownIt-Anchor" href="#322-添加路由">#</a> 3.2.2、添加路由</h5>
<p>在 src/router/index.js 添加路由</p>
<p>列表有三个 tab 切换，activeIndex 代表切换的序号，0：待审批 1：已审批 2：已发起</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/list/:activeIndex&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;审批列表&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span></span><br><span class="line">      <span class="keyword">import</span>(<span class="string">&#x27;../views/list.vue&#x27;</span>),</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h5 id="323-页面渲染"><a class="markdownIt-Anchor" href="#323-页面渲染">#</a> 3.2.3、页面渲染</h5>
<p>创建 src/views/list.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;van-nav-bar</span><br><span class="line">      title=&quot;审批列表&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;van-tabs v-model=&quot;activeIndex&quot; @click=&quot;tabSwitch&quot;&gt;</span><br><span class="line">      &lt;van-tab</span><br><span class="line">        v-for=&quot;(item,key) in tabList&quot;</span><br><span class="line">        :key=&quot;key&quot;</span><br><span class="line">        :title=&quot;item.title&quot;</span><br><span class="line">      &gt;</span><br><span class="line">      &lt;/van-tab&gt;</span><br><span class="line">    &lt;/van-tabs&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;list-wrap&quot; &gt;</span><br><span class="line">      &lt;van-pull-refresh v-model=&quot;refreshing&quot; @refresh=&quot;onRefresh&quot;&gt;</span><br><span class="line">      &lt;van-list</span><br><span class="line">        v-model=&quot;loading&quot;</span><br><span class="line">        :finished=&quot;finished&quot;</span><br><span class="line">        finished-text=&quot;没有更多了&quot;</span><br><span class="line">        @load=&quot;onLoad&quot;</span><br><span class="line">        :immediate-check=&quot;false&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;van-cell v-for=&quot;item in list&quot; :key=&quot;item.id&quot; @click=&quot;info(item.id, item.taskId)&quot;&gt;</span><br><span class="line">          &lt;template slot=&quot;default&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;item-wrap&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;item-header&quot;&gt;</span><br><span class="line">                &lt;img src=&quot;https://static.dingtalk.com/media/lALOnahFD80CgM0CgA_640_640.png_450x10000q90.jpg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">                &lt;h3&gt;&#123;&#123;item.title&#125;&#125;&lt;/h3&gt;</span><br><span class="line">                &lt;span&gt;&#123;&#123;item.createTime&#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;item-block&quot;&gt;</span><br><span class="line">                &lt;p v-for=&quot;(value,key) in item.formValues.formShowData&quot; v-if=&quot;key !== &#x27;图片&#x27;&quot;&gt;&#123;&#123; key &#125;&#125;：&lt;span v-html=&quot;value&quot;&gt;&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;item-status&quot;&gt;</span><br><span class="line">                &lt;span :class=&quot;item.status === 1 ? &#x27;审批中&#x27; : item.status === 2 ? &#x27;pass&#x27; : &#x27;refused&#x27;&quot;&gt;&#123;&#123; item.status === 1 ? &#x27;审批中&#x27; : item.status === 2 ? &#x27;审批通过&#x27; : &#x27;审批拒绝&#x27; &#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/van-cell&gt;</span><br><span class="line">      &lt;/van-list&gt;</span><br><span class="line">      &lt;/van-pull-refresh&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import api from &#x27;@/api/process&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;process&quot;,</span><br><span class="line"></span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      list: [],</span><br><span class="line">      loading: false,</span><br><span class="line">      finished: false,</span><br><span class="line">      refreshing: false,</span><br><span class="line"></span><br><span class="line">      pageNo: 1,</span><br><span class="line">      pageSize: 10,</span><br><span class="line">      pages: 1,</span><br><span class="line"></span><br><span class="line">      activeIndex: 0,</span><br><span class="line">      tabList: [</span><br><span class="line">        &#123; title:&quot;待处理&quot;, &#125;,</span><br><span class="line">        &#123; title:&quot;已处理&quot;, &#125;,</span><br><span class="line">        &#123; title:&quot;已发起&quot;, &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  created()&#123;</span><br><span class="line">    this.activeIndex = parseInt(this.$route.params.activeIndex);</span><br><span class="line">    this.onLoad()</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  methods: &#123;</span><br><span class="line">    tabSwitch() &#123;</span><br><span class="line">      //tab切换，重新初始化数据</span><br><span class="line">      this.list = []</span><br><span class="line">      this.pageNo = 1</span><br><span class="line">      this.finished = false</span><br><span class="line"></span><br><span class="line">      //tabs切换时，如果之前的tab已经滚动到底部（list加载到底部），直接点击其他的tab，将再触发一次onload事件。</span><br><span class="line">      //可能调用2次onLoad()方法，延迟执行，通过时间差解决问题</span><br><span class="line">      setTimeout(() =&gt; &#123;</span><br><span class="line">        if(!this.finished) &#123;</span><br><span class="line">          this.onLoad();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, 500);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    onLoad() &#123;</span><br><span class="line">      if(this.activeIndex === 0) &#123;</span><br><span class="line">        this.findPending()</span><br><span class="line">      &#125;</span><br><span class="line">      if(this.activeIndex === 1) &#123;</span><br><span class="line">        this.findProcessed()</span><br><span class="line">      &#125;</span><br><span class="line">      if(this.activeIndex === 2) &#123;</span><br><span class="line">        this.findStarted()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    onRefresh() &#123;</span><br><span class="line">      // 清空列表数据</span><br><span class="line">      this.finished = false;</span><br><span class="line"></span><br><span class="line">      this.pageNo = 1;</span><br><span class="line">      // 重新加载数据</span><br><span class="line">      // 将 loading 设置为 true，表示处于加载状态</span><br><span class="line">      this.loading = true;</span><br><span class="line">      this.onLoad();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    findPending() &#123;</span><br><span class="line">      console.log(this.pageNo)</span><br><span class="line">      api.findPending(this.pageNo, this.pageSize).then(response =&gt; &#123;</span><br><span class="line">        console.log(response.data);</span><br><span class="line">        if (this.refreshing) &#123;</span><br><span class="line">          this.list = [];</span><br><span class="line">          this.refreshing = false;</span><br><span class="line">        &#125;</span><br><span class="line">        for (let i=0;i&lt;response.data.records.length;i++) &#123;</span><br><span class="line">          let item = response.data.records[i]</span><br><span class="line">          item.formValues = JSON.parse(item.formValues)</span><br><span class="line">          this.list.push(item);</span><br><span class="line">        &#125;</span><br><span class="line">        this.pages = response.data.pages;</span><br><span class="line"></span><br><span class="line">        this.loading = false;</span><br><span class="line">        if(this.pageNo &gt;= this.pages) &#123;</span><br><span class="line">          this.finished = true;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        this.pageNo++;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    findProcessed() &#123;</span><br><span class="line">      </span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    findStarted() &#123;</span><br><span class="line">      </span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    info(id, taskId) &#123;</span><br><span class="line">      this.$router.push(&#123; path: &#x27;/show/&#x27;+id+&#x27;/&#x27;+taskId &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">/deep/ .van-nav-bar &#123;</span><br><span class="line">  background: #1D1E20;</span><br><span class="line">&#125;</span><br><span class="line">/deep/ .van-nav-bar__title &#123;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br><span class="line">.container &#123;</span><br><span class="line">  padding-bottom: 50px;</span><br><span class="line">  .list-wrap &#123;</span><br><span class="line">    margin-top: 4px;</span><br><span class="line">    border-top: 1px solid #ebedf0;</span><br><span class="line">  &#125;</span><br><span class="line">  .item-wrap &#123;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    color: #A7A8A9;</span><br><span class="line">    .item-header &#123;</span><br><span class="line">      display: flex;</span><br><span class="line">      align-items: center;</span><br><span class="line">      img &#123;</span><br><span class="line">        width: 20px;</span><br><span class="line">        height: 20px;</span><br><span class="line">        border-radius: 4px;</span><br><span class="line">        margin-right: 4px;</span><br><span class="line">      &#125;</span><br><span class="line">      h3 &#123;</span><br><span class="line">        flex: 1;</span><br><span class="line">        font-size: 15px;</span><br><span class="line">        color: #000;</span><br><span class="line">        padding: 0;</span><br><span class="line">        margin: 0;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item-block &#123;</span><br><span class="line">      padding: 4px 0;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      p &#123;</span><br><span class="line">        padding: 0;</span><br><span class="line">        margin: 0;</span><br><span class="line">        line-height: 20px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .item-status &#123;</span><br><span class="line">      .pass &#123;</span><br><span class="line">        color: #4CB971;</span><br><span class="line">      &#125;</span><br><span class="line">      .refused &#123;</span><br><span class="line">        color: #EB8473;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h5 id="324-测试"><a class="markdownIt-Anchor" href="#324-测试">#</a> 3.2.4、测试</h5>
<p>当前是部门经理审批，切换 token 为部门经理账号，查看待审批</p>
<p>为了方便测试，我们做一个账号切换页面</p>
<p>1、添加路由</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/test&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;切换测试账号&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span></span><br><span class="line">    <span class="keyword">import</span>(<span class="string">&#x27;../views/test.vue&#x27;</span>),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2、新建 vue 页面</p>
<p>新建 views/test.vue</p>
<p>说明：token 可能过期了，可通过 JwtHelper.java 类动态生成一次</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;账号切换&lt;/div&gt;</span><br><span class="line">    &lt;button @click=&quot;wjl()&quot; type=&quot;default&quot; size=&quot;mini&quot;&gt;王经理&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;rsjl()&quot; type=&quot;default&quot; size=&quot;mini&quot;&gt;李人事经理&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;zzjl()&quot; type=&quot;default&quot; size=&quot;mini&quot;&gt;张总经理&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;lisi()&quot; type=&quot;default&quot; size=&quot;mini&quot;&gt;李四&lt;/button&gt;</span><br><span class="line">    &lt;div&gt;当前token：&#123;&#123; token &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Test&quot;,</span><br><span class="line"></span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      token: &#x27;&#x27;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  created()&#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  methods: &#123;</span><br><span class="line">    wjl() &#123;</span><br><span class="line">      window.localStorage.setItem(&#x27;token&#x27;, &#x27;&#x27;);</span><br><span class="line">      let token = &#x27;eyJhbGciOiJIUzUxMiIsInppcCI6IkdaSVAifQ.H4sIAAAAAAAAAKtWKi5NUrJScgwN8dANDXYNUtJRSq0oULIyNDM3tDA3NTQ311EqLU4t8kxRsjKCMPMSc1OBWrIy89JzMoHqofznfd3Pd_c_n9CmVAsAgwZGsFYAAAA.H9lJkVALwz35h4BN1TNCAh1FttynUkIcsSdDJr46sA8O7pHtDZLA2TCNlTiPFI5ifYJ3nEyPdQnlqq1KM_dR3A&#x27;</span><br><span class="line">      window.localStorage.setItem(&#x27;token&#x27;, token);</span><br><span class="line">      this.token = window.localStorage.getItem(&#x27;token&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    rsjl() &#123;</span><br><span class="line">      window.localStorage.setItem(&#x27;token&#x27;, &#x27;&#x27;);</span><br><span class="line">      let token = &#x27;eyJhbGciOiJIUzUxMiIsInppcCI6IkdaSVAifQ.H4sIAAAAAAAAAKtWKi5NUrJScgwN8dANDXYNUtJRSq0oULIyNDM3tDA3NTIz11EqLU4t8kxRsjKGMPMSc1OBWoqKs3KAqqG8Z3P7nuza9WRX9_Pd_c8ntCnVAgAxtvYPWgAAAA.za6RgrrHFBfBFudpawIwHB4EfKloakef0CEmXwITPFpaS7LC2RJ7a2uFw4MwA9FlQS_YTm2xSPmDBI_zDUOQbQ&#x27;</span><br><span class="line">      window.localStorage.setItem(&#x27;token&#x27;, token);</span><br><span class="line">      this.token = window.localStorage.getItem(&#x27;token&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    zzjl() &#123;</span><br><span class="line">      window.localStorage.setItem(&#x27;token&#x27;, &#x27;&#x27;);</span><br><span class="line">      let token = &#x27;eyJhbGciOiJIUzUxMiIsInppcCI6IkdaSVAifQ.H4sIAAAAAAAAAKtWKi5NUrJScgwN8dANDXYNUtJRSq0oULIyNDM3tDA3NTYy1VEqLU4t8kxRsoIy8xJzU4FaqrJygIqhnKd7Fjxr2P18d__zCW1KtQAR8Ch1VgAAAA.szrvYa3nJprMhVjLGcGZ1mptv0Q5nQDOu81l4CtvtMXtEzsSuEUrf3sHL8v9jJF30Iq2qUXUMQYBgD5kYapd_A&#x27;</span><br><span class="line">      window.localStorage.setItem(&#x27;token&#x27;, token);</span><br><span class="line">      this.token = window.localStorage.getItem(&#x27;token&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    lisi() &#123;</span><br><span class="line">      window.localStorage.setItem(&#x27;token&#x27;, &#x27;&#x27;);</span><br><span class="line">      let token = &#x27;eyJhbGciOiJIUzUxMiIsInppcCI6IkdaSVAifQ.H4sIAAAAAAAAAKtWKi5NUrJScgwN8dANDXYNUtJRSq0oULIyNDM3NjA1M7M001EqLU4t8kxRsjKBMPMSc1OBWnIyizOVagG7ronSQQAAAA.Tw_w8JwifsxxQQVPQWTfTiJb3AL8xA2v9DcfZrqxm8R0Lgy3qAA9Sf5NPcVpFsdwip7gWdX31qwzUf10LAnM2w&#x27;</span><br><span class="line">      window.localStorage.setItem(&#x27;token&#x27;, token);</span><br><span class="line">      this.token = window.localStorage.getItem(&#x27;token&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>3、访问测试</p>
<p><a target="_blank" rel="noopener" href="http://localhost:9090/#/test">http://localhost:9090/#/test</a></p>
<p>后续需要谁审批，就在该页面切换一下即可</p>
<h3 id="4-审批详情"><a class="markdownIt-Anchor" href="#4-审批详情">#</a> 4、审批详情</h3>
<p>审批分 2 部分：</p>
<p>​	1、审批详情</p>
<p>​	2、执行审批：审批通过与审批不通过（直接结束流程）</p>
<h4 id="41-审批详情接口"><a class="markdownIt-Anchor" href="#41-审批详情接口">#</a> 4.1、审批详情接口</h4>
<h5 id="411-service接口"><a class="markdownIt-Anchor" href="#411-service接口">#</a> 4.1.1、service 接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Object&gt; <span class="title function_">show</span><span class="params">(Long id)</span>;</span><br></pre></td></tr></table></figure>
<h5 id="412-service接口实现"><a class="markdownIt-Anchor" href="#412-service接口实现">#</a> 4.1.2、service 接口实现</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">show</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">    <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> <span class="built_in">this</span>.getById(id);</span><br><span class="line">    List&lt;ProcessRecord&gt; processRecordList = processRecordService.list(<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;ProcessRecord&gt;().eq(ProcessRecord::getProcessId, id));</span><br><span class="line">    <span class="type">ProcessTemplate</span> <span class="variable">processTemplate</span> <span class="operator">=</span> processTemplateService.getById(process.getProcessTemplateId());</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;process&quot;</span>, process);</span><br><span class="line">    map.put(<span class="string">&quot;processRecordList&quot;</span>, processRecordList);</span><br><span class="line">    map.put(<span class="string">&quot;processTemplate&quot;</span>, processTemplate);</span><br><span class="line">    <span class="comment">//计算当前用户是否可以审批，能够查看详情的用户不是都能审批，审批后也不能重复审批</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">isApprove</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    List&lt;Task&gt; taskList = <span class="built_in">this</span>.getCurrentTaskList(process.getProcessInstanceId());</span><br><span class="line">    <span class="keyword">if</span> (!CollectionUtils.isEmpty(taskList)) &#123;</span><br><span class="line">        <span class="keyword">for</span>(Task task : taskList) &#123;</span><br><span class="line">           <span class="keyword">if</span>(task.getAssignee().equals(LoginUserInfoHelper.getUsername())) &#123;</span><br><span class="line">               isApprove = <span class="literal">true</span>;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    map.put(<span class="string">&quot;isApprove&quot;</span>, isApprove);</span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="413-controller接口"><a class="markdownIt-Anchor" href="#413-controller接口">#</a> 4.1.3、controller 接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(value = &quot;获取审批详情&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;show/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">show</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> Result.ok(processService.show(id));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="42-前端渲染"><a class="markdownIt-Anchor" href="#42-前端渲染">#</a> 4.2、前端渲染</h4>
<h5 id="421-定义api接口"><a class="markdownIt-Anchor" href="#421-定义api接口">#</a> 4.2.1、定义 api 接口</h5>
<p>在 src/api/process.js 添加接口</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">show</span>(<span class="params">id</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`<span class="subst">$&#123;api_name&#125;</span>/show/`</span>+id,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h5 id="422-添加路由"><a class="markdownIt-Anchor" href="#422-添加路由">#</a> 4.2.2、添加路由</h5>
<p>在 src/router/index.js 添加路由</p>
<p>执行任务会用到当前任务 id：taskId</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/show/:id/:taskId&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;审批详情&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span></span><br><span class="line">      <span class="keyword">import</span>(<span class="string">&#x27;../views/show.vue&#x27;</span>),</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h5 id="423-页面渲染"><a class="markdownIt-Anchor" href="#423-页面渲染">#</a> 4.2.3、页面渲染</h5>
<p>创建 src/views/show.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;van-nav-bar</span><br><span class="line">      title=&quot;审批详情&quot;</span><br><span class="line">      left-text=&quot;返回&quot;</span><br><span class="line">      left-arrow</span><br><span class="line">      @click-left=&quot;() =&gt; $router.back()&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;van-list&gt;</span><br><span class="line">      &lt;van-cell&gt;</span><br><span class="line">        &lt;template slot=&quot;default&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;header-warp&quot;&gt;</span><br><span class="line">            &lt;h4&gt;&#123;&#123; process.title &#125;&#125;&lt;/h4&gt;</span><br><span class="line">            &lt;p&gt;&#123;&#123; process.createTime &#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;span class=&quot;pass&quot; v-if=&quot;process.status === 1&quot;&gt;审批中&lt;/span&gt;</span><br><span class="line">            &lt;div class=&quot;seal-wrap&quot; v-if=&quot;process.status === 2&quot;&gt;</span><br><span class="line">              &lt;seal-avatar&gt;&lt;/seal-avatar&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;seal-wrap&quot; v-if=&quot;process.status === -1&quot;&gt;</span><br><span class="line">              &lt;seal-avatar title=&quot;已拒绝&quot; color=&quot;#EB8473&quot;&gt;&lt;/seal-avatar&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/van-cell&gt;</span><br><span class="line">      &lt;van-cell&gt;</span><br><span class="line">        &lt;template slot=&quot;default&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;detail-wrap&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;item&quot; v-for=&quot;(value,key) in formValues.formShowData&quot;&gt;</span><br><span class="line">              &lt;h5&gt;&#123;&#123; key &#125;&#125;&lt;/h5&gt;</span><br><span class="line">              &lt;p v-html=&quot;value&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/van-cell&gt;</span><br><span class="line"></span><br><span class="line">      &lt;van-cell&gt;</span><br><span class="line">        &lt;template slot=&quot;default&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;result&quot;&gt;</span><br><span class="line">            &lt;h3&gt;流程&lt;/h3&gt;</span><br><span class="line">            &lt;van-steps direction=&quot;vertical&quot; :active=&quot;processRecordList.length - 1&quot;&gt;</span><br><span class="line">              &lt;van-step v-for=&quot;item in processRecordList&quot;&gt;</span><br><span class="line">                &lt;h4&gt;&#123;&#123; item.operateUser &#125;&#125; &#123;&#123; item.description &#125;&#125;&lt;/h4&gt;</span><br><span class="line">                &lt;p&gt;&#123;&#123; item.createTime &#125;&#125;&lt;/p&gt;</span><br><span class="line">              &lt;/van-step&gt;</span><br><span class="line">            &lt;/van-steps&gt;</span><br><span class="line"></span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/van-cell&gt;</span><br><span class="line">    &lt;/van-list&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;notice&quot; v-if=&quot;isApprove&quot;&gt;</span><br><span class="line">      &lt;van-icon name=&quot;bullhorn-o&quot; /&gt;</span><br><span class="line">      &lt;p&gt;&#123;&#123; process.title &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;span class=&quot;pass&quot;&gt;&#123;&#123; process.status === 1 ? &#x27;审批中&#x27; : process.status === 2 ? &#x27;审批通过&#x27; : &#x27;审批拒绝&#x27; &#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;footer&quot; v-if=&quot;taskId != 0&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;left-action&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;action back&quot; @click=&quot;() =&gt; $router.back()&quot;&gt;</span><br><span class="line">          &lt;van-icon name=&quot;revoke&quot; /&gt;</span><br><span class="line">          &lt;span&gt;返回&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;right-button&quot;&gt;</span><br><span class="line">        &lt;van-button @click=&quot;approve(-1)&quot; type=&quot;default&quot; size=&quot;small&quot;&gt;审批拒绝&lt;/van-button&gt;</span><br><span class="line">        &lt;span style=&quot;margin: 0 4px&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;van-button @click=&quot;approve(1)&quot; type=&quot;info&quot; size=&quot;small&quot;&gt;审批通过&lt;/van-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import SealAvatar from &#x27;../components/Seal.vue&#x27;;</span><br><span class="line">import api from &#x27;@/api/process&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;process&quot;,</span><br><span class="line"></span><br><span class="line">  components: &#123;</span><br><span class="line">    SealAvatar,</span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    msg: String</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      taskId: 0,</span><br><span class="line">      process: &#123; &#125;,</span><br><span class="line">      formValues: &#123;&#125;,</span><br><span class="line">      processRecordList: [],</span><br><span class="line">      isApprove: false</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  created()&#123;</span><br><span class="line">    this.taskId = this.$route.params.taskId;</span><br><span class="line">    let id = this.$route.params.id;</span><br><span class="line">    this.fetchData(id);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  methods: &#123;</span><br><span class="line">    fetchData(id) &#123;</span><br><span class="line">      api.show(id).then(response =&gt; &#123;</span><br><span class="line">        this.process = response.data.process</span><br><span class="line">        this.formValues = JSON.parse(this.process.formValues)</span><br><span class="line">        this.processRecordList = response.data.processRecordList</span><br><span class="line">        this.isApprove = response.data.isApprove</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    approve(status) &#123;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  padding-bottom: 86px;</span><br><span class="line">  .header-warp &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    h4 &#123;</span><br><span class="line">      font-size: 16px;</span><br><span class="line">      margin: 5px;</span><br><span class="line">    &#125;</span><br><span class="line">    p &#123;</span><br><span class="line">      font-size: 16px;</span><br><span class="line">      margin: 5px;</span><br><span class="line">    &#125;</span><br><span class="line">    .pass &#123;</span><br><span class="line">      color: #4CB971;</span><br><span class="line">      margin: 5px;</span><br><span class="line">    &#125;</span><br><span class="line">    .refused &#123;</span><br><span class="line">      color: #EB8473;</span><br><span class="line">      margin: 5px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .detail-wrap &#123;</span><br><span class="line">    .item &#123;</span><br><span class="line">      h5 &#123;</span><br><span class="line">        color: #838485;</span><br><span class="line">        margin: 5px;</span><br><span class="line">      &#125;</span><br><span class="line">      p &#123;</span><br><span class="line">        color: #1B1F22;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">        margin: 5px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .result &#123;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    h4, p &#123;</span><br><span class="line">      margin: 5px;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .seal-wrap &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 20px;</span><br><span class="line">    right: 30px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .notice &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    width: 100%;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    padding: 8px 10px;</span><br><span class="line">    background: #FEFBE8;</span><br><span class="line">    position: fixed;</span><br><span class="line">    bottom: 53px;</span><br><span class="line">    z-index: 10;</span><br><span class="line">    p &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      margin: 4px;</span><br><span class="line">    &#125;</span><br><span class="line">    .pass &#123;</span><br><span class="line">      color: #07c160;</span><br><span class="line">      margin-right: 20px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .footer &#123;</span><br><span class="line">    // height: 50px;</span><br><span class="line">    padding: 10px;</span><br><span class="line">    background: #F8F8F8;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    position: fixed;</span><br><span class="line">    width: 100%;</span><br><span class="line">    bottom: 0;</span><br><span class="line">    z-index: 10;</span><br><span class="line">    .left-action &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      .action &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-direction: column;</span><br><span class="line">        justify-content: center;</span><br><span class="line">        align-items: center;</span><br><span class="line"></span><br><span class="line">        span &#123;</span><br><span class="line">          font-size: 12px;</span><br><span class="line">          color: #838485;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .right-button &#123;</span><br><span class="line">      margin-right: 20px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/deep/ .van-cell &#123;</span><br><span class="line">  position: inherit;</span><br><span class="line">  overflow: visible;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/deep/ .van-cell__value&#123;</span><br><span class="line">  position: inherit;</span><br><span class="line">  overflow: visible;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="5-审批"><a class="markdownIt-Anchor" href="#5-审批">#</a> 5、审批</h3>
<h4 id="51-审批接口"><a class="markdownIt-Anchor" href="#51-审批接口">#</a> 5.1、审批接口</h4>
<h5 id="511-service接口"><a class="markdownIt-Anchor" href="#511-service接口">#</a> 5.1.1、service 接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">approve</span><span class="params">(ApprovalVo approvalVo)</span>;</span><br></pre></td></tr></table></figure>
<h5 id="512-service接口实现"><a class="markdownIt-Anchor" href="#512-service接口实现">#</a> 5.1.2、service 接口实现</h5>
<p>如果审批不通过，直接结束流程（说明：并行审批流程不能满足，我们的业务当前不需要并行处理）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">approve</span><span class="params">(ApprovalVo approvalVo)</span> &#123;</span><br><span class="line">    Map&lt;String, Object&gt; variables1 = taskService.getVariables(approvalVo.getTaskId());</span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;String, Object&gt; entry : variables1.entrySet()) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Key = &quot;</span> + entry.getKey() + <span class="string">&quot;, Value = &quot;</span> + entry.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">String</span> <span class="variable">taskId</span> <span class="operator">=</span> approvalVo.getTaskId();</span><br><span class="line">    <span class="keyword">if</span> (approvalVo.getStatus() == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">//已通过</span></span><br><span class="line">        Map&lt;String, Object&gt; variables = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">        taskService.complete(taskId, variables);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//驳回</span></span><br><span class="line">        <span class="built_in">this</span>.endTask(taskId);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">String</span> <span class="variable">description</span> <span class="operator">=</span> approvalVo.getStatus().intValue() == <span class="number">1</span> ? <span class="string">&quot;已通过&quot;</span> : <span class="string">&quot;驳回&quot;</span>;</span><br><span class="line">    processRecordService.record(approvalVo.getProcessId(), approvalVo.getStatus(), description);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//计算下一个审批人</span></span><br><span class="line">    <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> <span class="built_in">this</span>.getById(approvalVo.getProcessId());</span><br><span class="line">    List&lt;Task&gt; taskList = <span class="built_in">this</span>.getCurrentTaskList(process.getProcessInstanceId());</span><br><span class="line">    <span class="keyword">if</span> (!CollectionUtils.isEmpty(taskList)) &#123;</span><br><span class="line">        List&lt;String&gt; assigneeList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(Task task : taskList) &#123;</span><br><span class="line">            <span class="type">SysUser</span> <span class="variable">sysUser</span> <span class="operator">=</span> sysUserService.getByUsername(task.getAssignee());</span><br><span class="line">            assigneeList.add(sysUser.getName());</span><br><span class="line"></span><br><span class="line">            <span class="comment">//推送消息给下一个审批人</span></span><br><span class="line">        &#125;</span><br><span class="line">        process.setDescription(<span class="string">&quot;等待&quot;</span> + StringUtils.join(assigneeList.toArray(), <span class="string">&quot;,&quot;</span>) + <span class="string">&quot;审批&quot;</span>);</span><br><span class="line">        process.setStatus(<span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(approvalVo.getStatus().intValue() == <span class="number">1</span>) &#123;</span><br><span class="line">            process.setDescription(<span class="string">&quot;审批完成（同意）&quot;</span>);</span><br><span class="line">            process.setStatus(<span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            process.setDescription(<span class="string">&quot;审批完成（拒绝）&quot;</span>);</span><br><span class="line">            process.setStatus(-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//推送消息给申请人</span></span><br><span class="line">    <span class="built_in">this</span>.updateById(process);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">endTask</span><span class="params">(String taskId)</span> &#123;</span><br><span class="line">    <span class="comment">//  当前任务</span></span><br><span class="line">    <span class="type">Task</span> <span class="variable">task</span> <span class="operator">=</span> taskService.createTaskQuery().taskId(taskId).singleResult();</span><br><span class="line"></span><br><span class="line">    <span class="type">BpmnModel</span> <span class="variable">bpmnModel</span> <span class="operator">=</span> repositoryService.getBpmnModel(task.getProcessDefinitionId());</span><br><span class="line">    <span class="type">List</span> <span class="variable">endEventList</span> <span class="operator">=</span> bpmnModel.getMainProcess().findFlowElementsOfType(EndEvent.class);</span><br><span class="line">    <span class="comment">// 并行任务可能为null</span></span><br><span class="line">    <span class="keyword">if</span>(CollectionUtils.isEmpty(endEventList)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">FlowNode</span> <span class="variable">endFlowNode</span> <span class="operator">=</span> (FlowNode) endEventList.get(<span class="number">0</span>);</span><br><span class="line">    <span class="type">FlowNode</span> <span class="variable">currentFlowNode</span> <span class="operator">=</span> (FlowNode) bpmnModel.getMainProcess().getFlowElement(task.getTaskDefinitionKey());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  临时保存当前活动的原始方向</span></span><br><span class="line">    <span class="type">List</span> <span class="variable">originalSequenceFlowList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    originalSequenceFlowList.addAll(currentFlowNode.getOutgoingFlows());</span><br><span class="line">    <span class="comment">//  清理活动方向</span></span><br><span class="line">    currentFlowNode.getOutgoingFlows().clear();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  建立新方向</span></span><br><span class="line">    <span class="type">SequenceFlow</span> <span class="variable">newSequenceFlow</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SequenceFlow</span>();</span><br><span class="line">    newSequenceFlow.setId(<span class="string">&quot;newSequenceFlowId&quot;</span>);</span><br><span class="line">    newSequenceFlow.setSourceFlowElement(currentFlowNode);</span><br><span class="line">    newSequenceFlow.setTargetFlowElement(endFlowNode);</span><br><span class="line">    <span class="type">List</span> <span class="variable">newSequenceFlowList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    newSequenceFlowList.add(newSequenceFlow);</span><br><span class="line">    <span class="comment">//  当前节点指向新的方向</span></span><br><span class="line">    currentFlowNode.setOutgoingFlows(newSequenceFlowList);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  完成当前任务</span></span><br><span class="line">    taskService.complete(task.getId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="513-controller接口"><a class="markdownIt-Anchor" href="#513-controller接口">#</a> 5.1.3、controller 接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(value = &quot;审批&quot;)</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;approve&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">approve</span><span class="params">(<span class="meta">@RequestBody</span> ApprovalVo approvalVo)</span> &#123;</span><br><span class="line">   processService.approve(approvalVo);</span><br><span class="line">   <span class="keyword">return</span> Result.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="52-前端实现"><a class="markdownIt-Anchor" href="#52-前端实现">#</a> 5.2、前端实现</h4>
<h5 id="521-定义api接口"><a class="markdownIt-Anchor" href="#521-定义api接口">#</a> 5.2.1、定义 api 接口</h5>
<p>在 src/api/process.js 添加接口</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">approve</span>(<span class="params">approvalVo</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`<span class="subst">$&#123;api_name&#125;</span>/approve`</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: approvalVo</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h5 id="522-页面处理"><a class="markdownIt-Anchor" href="#522-页面处理">#</a> 5.2.2、页面处理</h5>
<p>补充 src/views/show.vue 页面审批功能</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">approve</span>(<span class="params">status</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> approvalVo = &#123;</span><br><span class="line">    <span class="attr">processId</span>: <span class="variable language_">this</span>.<span class="property">process</span>.<span class="property">id</span>,</span><br><span class="line">    <span class="attr">taskId</span>: <span class="variable language_">this</span>.<span class="property">taskId</span>,</span><br><span class="line">    <span class="attr">status</span>: status</span><br><span class="line">  &#125;</span><br><span class="line">  api.<span class="title function_">approve</span>(approvalVo).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/list/1&#x27;</span> &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-已处理"><a class="markdownIt-Anchor" href="#6-已处理">#</a> 6、已处理</h3>
<h4 id="61-已处理接口"><a class="markdownIt-Anchor" href="#61-已处理接口">#</a> 6.1、已处理接口</h4>
<h5 id="611-service接口"><a class="markdownIt-Anchor" href="#611-service接口">#</a> 6.1.1、service 接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IPage&lt;ProcessVo&gt; <span class="title function_">findProcessed</span><span class="params">(Page&lt;Process&gt; pageParam)</span>;</span><br></pre></td></tr></table></figure>
<h5 id="612-service接口实现"><a class="markdownIt-Anchor" href="#612-service接口实现">#</a> 6.1.2、service 接口实现</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> HistoryService historyService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> IPage&lt;ProcessVo&gt; <span class="title function_">findProcessed</span><span class="params">(Page&lt;Process&gt; pageParam)</span> &#123;</span><br><span class="line">    <span class="comment">// 根据当前人的ID查询</span></span><br><span class="line">    <span class="type">HistoricTaskInstanceQuery</span> <span class="variable">query</span> <span class="operator">=</span> historyService.createHistoricTaskInstanceQuery().taskAssignee(LoginUserInfoHelper.getUsername()).finished().orderByTaskCreateTime().desc();</span><br><span class="line">    List&lt;HistoricTaskInstance&gt; list = query.listPage((<span class="type">int</span>) ((pageParam.getCurrent() - <span class="number">1</span>) * pageParam.getSize()), (<span class="type">int</span>) pageParam.getSize());</span><br><span class="line">    <span class="type">long</span> <span class="variable">totalCount</span> <span class="operator">=</span> query.count();</span><br><span class="line"></span><br><span class="line">    List&lt;ProcessVo&gt; processList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (HistoricTaskInstance item : list) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">processInstanceId</span> <span class="operator">=</span> item.getProcessInstanceId();</span><br><span class="line">        <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> <span class="built_in">this</span>.getOne(<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;Process&gt;().eq(Process::getProcessInstanceId, processInstanceId));</span><br><span class="line">        <span class="type">ProcessVo</span> <span class="variable">processVo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessVo</span>();</span><br><span class="line">        BeanUtils.copyProperties(process, processVo);</span><br><span class="line">        processVo.setTaskId(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">        processList.add(processVo);</span><br><span class="line">    &#125;</span><br><span class="line">    IPage&lt;ProcessVo&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;ProcessVo&gt;(pageParam.getCurrent(), pageParam.getSize(), totalCount);</span><br><span class="line">    page.setRecords(processList);</span><br><span class="line">    <span class="keyword">return</span> page;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="613-controller接口"><a class="markdownIt-Anchor" href="#613-controller接口">#</a> 6.1.3、controller 接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(value = &quot;已处理&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/findProcessed/&#123;page&#125;/&#123;limit&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">findProcessed</span><span class="params">(</span></span><br><span class="line"><span class="params">      <span class="meta">@ApiParam(name = &quot;page&quot;, value = &quot;当前页码&quot;, required = true)</span></span></span><br><span class="line"><span class="params">      <span class="meta">@PathVariable</span> Long page,</span></span><br><span class="line"><span class="params">      <span class="meta">@ApiParam(name = &quot;limit&quot;, value = &quot;每页记录数&quot;, required = true)</span></span></span><br><span class="line"><span class="params">      <span class="meta">@PathVariable</span> Long limit)</span> &#123;</span><br><span class="line">   Page&lt;Process&gt; pageParam = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(page, limit);</span><br><span class="line">   <span class="keyword">return</span> Result.ok(processService.findProcessed(pageParam));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="62-前端实现"><a class="markdownIt-Anchor" href="#62-前端实现">#</a> 6.2、前端实现</h4>
<h5 id="621-定义api接口"><a class="markdownIt-Anchor" href="#621-定义api接口">#</a> 6.2.1、定义 api 接口</h5>
<p>在 src/api/process.js 添加接口</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">findProcessed</span>(<span class="params">page, limit</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`<span class="subst">$&#123;api_name&#125;</span>/findProcessed/`</span>+page+<span class="string">`/`</span>+ limit,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h5 id="622-页面处理"><a class="markdownIt-Anchor" href="#622-页面处理">#</a> 6.2.2、页面处理</h5>
<p>补充 src/views/list.vue 页面方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">findProcessed</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">pageNo</span>)</span><br><span class="line">  api.<span class="title function_">findProcessed</span>(<span class="variable language_">this</span>.<span class="property">pageNo</span>, <span class="variable language_">this</span>.<span class="property">pageSize</span>).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">refreshing</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">list</span> = [];</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">refreshing</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;response.<span class="property">data</span>.<span class="property">records</span>.<span class="property">length</span>;i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> item = response.<span class="property">data</span>.<span class="property">records</span>[i]</span><br><span class="line">      item.<span class="property">formValues</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(item.<span class="property">formValues</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(item);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pages</span> = response.<span class="property">data</span>.<span class="property">pages</span>;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">loading</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">pageNo</span> &gt;= <span class="variable language_">this</span>.<span class="property">pages</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">finished</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pageNo</span>++;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="7-已发起"><a class="markdownIt-Anchor" href="#7-已发起">#</a> 7、已发起</h3>
<h4 id="71-已发起接口"><a class="markdownIt-Anchor" href="#71-已发起接口">#</a> 7.1、已发起接口</h4>
<h5 id="711-service接口"><a class="markdownIt-Anchor" href="#711-service接口">#</a> 7.1.1、service 接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IPage&lt;ProcessVo&gt; <span class="title function_">findStarted</span><span class="params">(Page&lt;ProcessVo&gt; pageParam)</span>;</span><br></pre></td></tr></table></figure>
<h5 id="712-service接口实现"><a class="markdownIt-Anchor" href="#712-service接口实现">#</a> 7.1.2、service 接口实现</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> IPage&lt;ProcessVo&gt; <span class="title function_">findStarted</span><span class="params">(Page&lt;ProcessVo&gt; pageParam)</span> &#123;</span><br><span class="line">        <span class="type">ProcessQueryVo</span> <span class="variable">processQueryVo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessQueryVo</span>();</span><br><span class="line">        processQueryVo.setUserId(LoginUserInfoHelper.getUserId());</span><br><span class="line">        IPage&lt;ProcessVo&gt; page = processMapper.selectPage(pageParam, processQueryVo);</span><br><span class="line">        <span class="keyword">for</span> (ProcessVo item : page.getRecords()) &#123;</span><br><span class="line">            item.setTaskId(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> page;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h5 id="713-controller接口"><a class="markdownIt-Anchor" href="#713-controller接口">#</a> 7.1.3、controller 接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(value = &quot;已发起&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/findStarted/&#123;page&#125;/&#123;limit&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">findStarted</span><span class="params">(</span></span><br><span class="line"><span class="params">      <span class="meta">@ApiParam(name = &quot;page&quot;, value = &quot;当前页码&quot;, required = true)</span></span></span><br><span class="line"><span class="params">      <span class="meta">@PathVariable</span> Long page,</span></span><br><span class="line"><span class="params"></span></span><br><span class="line"><span class="params">      <span class="meta">@ApiParam(name = &quot;limit&quot;, value = &quot;每页记录数&quot;, required = true)</span></span></span><br><span class="line"><span class="params">      <span class="meta">@PathVariable</span> Long limit)</span> &#123;</span><br><span class="line">   Page&lt;ProcessVo&gt; pageParam = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(page, limit);</span><br><span class="line">   <span class="keyword">return</span> Result.ok(processService.findStarted(pageParam));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="72-前端实现"><a class="markdownIt-Anchor" href="#72-前端实现">#</a> 7.2、前端实现</h4>
<h5 id="721-定义api接口"><a class="markdownIt-Anchor" href="#721-定义api接口">#</a> 7.2.1、定义 api 接口</h5>
<p>在 src/api/process.js 添加接口</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">findStarted</span>(<span class="params">page, limit</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`<span class="subst">$&#123;api_name&#125;</span>/findStarted/`</span>+page+<span class="string">`/`</span>+ limit,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h5 id="722-页面处理"><a class="markdownIt-Anchor" href="#722-页面处理">#</a> 7.2.2、页面处理</h5>
<p>补充 src/views/list.vue 页面方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">findStarted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">pageNo</span>)</span><br><span class="line">  api.<span class="title function_">findStarted</span>(<span class="variable language_">this</span>.<span class="property">pageNo</span>, <span class="variable language_">this</span>.<span class="property">pageSize</span>).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">refreshing</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">list</span> = [];</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">refreshing</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;response.<span class="property">data</span>.<span class="property">records</span>.<span class="property">length</span>;i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> item = response.<span class="property">data</span>.<span class="property">records</span>[i]</span><br><span class="line">      item.<span class="property">formValues</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(item.<span class="property">formValues</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(item);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pages</span> = response.<span class="property">data</span>.<span class="property">pages</span>;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">loading</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">pageNo</span> &gt;= <span class="variable language_">this</span>.<span class="property">pages</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">finished</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pageNo</span>++;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="三-我的"><a class="markdownIt-Anchor" href="#三-我的">#</a> 三、我的</h2>
<h3 id="1-基本信息"><a class="markdownIt-Anchor" href="#1-基本信息">#</a> 1、基本信息</h3>
<h4 id="11-基本信息接口"><a class="markdownIt-Anchor" href="#11-基本信息接口">#</a> 1.1、基本信息接口</h4>
<h5 id="111-service接口"><a class="markdownIt-Anchor" href="#111-service接口">#</a> 1.1.1、service 接口</h5>
<p>操作类：SysUserService</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Object&gt; <span class="title function_">getCurrentUser</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<h5 id="112-service接口实现-2"><a class="markdownIt-Anchor" href="#112-service接口实现-2">#</a> 1.1.2、service 接口实现</h5>
<p>操作类：SysUserServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> SysDeptService sysDeptService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> SysPostService sysPostService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">getCurrentUser</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">SysUser</span> <span class="variable">sysUser</span> <span class="operator">=</span> sysUserMapper.selectById(LoginUserInfoHelper.getUserId());</span><br><span class="line">		<span class="comment">//SysDept sysDept = sysDeptService.getById(sysUser.getDeptId());</span></span><br><span class="line">		<span class="comment">//SysPost sysPost = sysPostService.getById(sysUser.getPostId());</span></span><br><span class="line">		Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">		map.put(<span class="string">&quot;name&quot;</span>, sysUser.getName());</span><br><span class="line">		map.put(<span class="string">&quot;phone&quot;</span>, sysUser.getPhone());</span><br><span class="line">		<span class="comment">//map.put(&quot;deptName&quot;, sysDept.getName());</span></span><br><span class="line">		<span class="comment">//map.put(&quot;postName&quot;, sysPost.getName());</span></span><br><span class="line">		<span class="keyword">return</span> map;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h5 id="113-controller接口-2"><a class="markdownIt-Anchor" href="#113-controller接口-2">#</a> 1.1.3、controller 接口</h5>
<p>操作类：SysUserController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(value = &quot;获取当前用户基本信息&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getCurrentUser&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">getCurrentUser</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Result.ok(sysUserService.getCurrentUser());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="12-前端实现"><a class="markdownIt-Anchor" href="#12-前端实现">#</a> 1.2、前端实现</h4>
<h5 id="121-定义api接口"><a class="markdownIt-Anchor" href="#121-定义api接口">#</a> 1.2.1、定义 api 接口</h5>
<p>创建 src/api/userInfo.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getCurrentUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`/admin/system/sysUser/getCurrentUser/`</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="222-添加路由"><a class="markdownIt-Anchor" href="#222-添加路由">#</a> 2.2.2、添加路由</h5>
<p>在 src/router/index.js 添加路由</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/user&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;基本信息&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span></span><br><span class="line">    <span class="keyword">import</span>(<span class="string">&#x27;../views/user.vue&#x27;</span>),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h5 id="224-页面实现"><a class="markdownIt-Anchor" href="#224-页面实现">#</a> 2.2.4、页面实现</h5>
<p>创建 src/views/user.vue</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">van-nav-bar</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">title</span>=<span class="string">&quot;基本信息&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail-wrap&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>用户姓名：&#123;&#123; user.name &#125;&#125;<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>手机号：&#123;&#123; user.phone &#125;&#125;<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>所在部门：&#123;&#123; user.deptName &#125;&#125;<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>岗位：&#123;&#123; user.postName &#125;&#125;<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&#x27;@/api/userInfo&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;process&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">user</span>: &#123; &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="title function_">fetchData</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">fetchData</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// debugger</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      api.<span class="title function_">getCurrentUser</span>().<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">this</span>.<span class="property">user</span> = response.<span class="property">data</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.container</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="selector-class">.detail-wrap</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.item</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="selector-tag">h5</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">color</span>: <span class="number">#838485</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">margin</span>: <span class="number">10px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="selector-tag">p</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">color</span>: <span class="number">#1B1F22</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="2-关于我们"><a class="markdownIt-Anchor" href="#2-关于我们">#</a> 2、关于我们</h3>
<h4 id="21-添加路由"><a class="markdownIt-Anchor" href="#21-添加路由">#</a> 2.1、添加路由</h4>
<p>在 src/router/index.js 添加路由</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;关于我们&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span></span><br><span class="line">    <span class="keyword">import</span>(<span class="string">&#x27;../views/about.vue&#x27;</span>),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h4 id="22-添加页面"><a class="markdownIt-Anchor" href="#22-添加页面">#</a> 2.2、添加页面</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">van-nav-bar</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">title</span>=<span class="string">&quot;关于我们&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail-wrap&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        尚硅谷IT教育（以下简称尚硅谷），隶属于北京晟程华科教育科技有限公司，是一家专业的IT教育培训机构，现拥有北京、深圳、上海、武汉、西安、成都六处教学基地。自2013年成立以来，凭借优秀的教育理念、前瞻的课程体系、专业的教学团队、科学的考评制度、严格的教务管理，已经为行业输送了大量IT技术人才。</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        尚硅谷开设有Java、大数据、HTML5前端等多门课程，在互联网上发布的Java、大数据、HTML5前端、Python、区块链、Linux、C语言等视频教程广受赞誉。通过面授课程、视频分享、在线学习、直播课堂、图书出版等多种方式，满足了全国编程爱好者对多样化学习场景的需求。</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        截止2022年10月，尚硅谷已累计发布视频教程20167集，总计时长265879分钟，B站粉丝百万播放量破亿。尚硅谷将始终秉承“让天下没有难学的技术，帮助到更多需要帮助的人”的教育理念，坚持开源精神，不断打磨产品，为众多技术爱好者提供免费的教学资源，帮助更多的人走上了软件开发之路，为中国的软件人才培养尽一点绵薄之力。</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        尚硅谷一直坚持“技术为王，课比天大”的发展理念，专注技术，死磕课程，团队中技术型人才占比60%以上，来自清华、北航、北邮、哈工大、中科院电子所等多所名校。尚硅谷设有独立的研究院，与多家互联网大厂的研发团队保持技术交流，保障教学内容始终基于实战项目，聘用名校名企的技术专家，源码级别的授课讲解，培养高素质软件开发人才。</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        尚硅谷一方面为多所高等院校大学生提供专业技术培训，一方面为阿里巴巴、百度、腾讯、华为、京东、小米、360等多家企业输送高素质软件开发人才，打通了企业招聘和人才就业的双向渠道，为整个IT产业的健康快速发展，做出了强有力的贡献！</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        2014年，尚硅谷荣获新浪“最具综合实力职业培训机构”大奖；</span></span><br><span class="line"><span class="language-xml">        2018年，在腾讯年度盛典中脱颖而出，被评为“2018年度综合实力教育集团”；</span></span><br><span class="line"><span class="language-xml">        2020年，被凤凰网华人教育家大会评选为“2019-2020年度华人影响力职业教育品牌”；</span></span><br><span class="line"><span class="language-xml">        2021年，喜获央广网“年度公信力教育品牌”。</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;process&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.container</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="selector-class">.detail-wrap</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.item</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">color</span>: <span class="number">#838485</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure></div><div class="sharethis-inline-share-buttons"></div><script src="https://brath.cn" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2023/07/06/11.%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/"><i class="level-item fas fa-chevron-left"></i><span class="level-item"> </span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2023/07/06/9.%E5%AE%A1%E6%89%B9%E7%AE%A1%E7%90%86/"><span class="level-item"> </span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-06T08:39:47.642Z">2023-07-06</time></p><p class="title"><a href="/2023/07/06/2.%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-06T08:39:47.640Z">2023-07-06</time></p><p class="title"><a href="/2023/07/06/1.%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-06T08:39:47.638Z">2023-07-06</time></p><p class="title"><a href="/2023/07/06/12.%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-06T08:39:47.636Z">2023-07-06</time></p><p class="title"><a href="/2023/07/06/11.%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-06T08:39:47.634Z">2023-07-06</time></p><p class="title"><a href="/2023/07/06/10.%E5%89%8D%E7%AB%AF%E5%AE%A1%E6%89%B9/"> </a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li></ul></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://moon-sea.oss-cn-shanghai.aliyuncs.com/blog_images/head.png" alt="beibei"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">beibei</p><p class="is-size-6 is-block">自信，向阳生长。</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国·江苏·无锡</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">16</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/zhengyaok" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/zhengyaok"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://gitee.com/Guoqing-Li" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Gitee(码云)</span></span><span class="level-right"><span class="level-item tag">gitee.com</span></span></a></li><li><a class="level is-mobile" href="https://blog.csdn.net/Brath?type=blog" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li><li><a class="level is-mobile" href="https://juejin.cn/user/settings/profile" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">掘金</span></span><span class="level-right"><span class="level-item tag">juejin.cn</span></span></a></li><li><a class="level is-mobile" href="https://oss.console.aliyun.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">AliCloud(阿里云)</span></span><span class="level-right"><span class="level-item tag">oss.console.aliyun.com</span></span></a></li><li><a class="level is-mobile" href="https://cloud.tencent.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">TencentCloud(腾讯云)</span></span><span class="level-right"><span class="level-item tag">cloud.tencent.com</span></span></a></li><li><a class="level is-mobile" href="https://www.zhipin.com/web/user/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">BOSS</span></span><span class="level-right"><span class="level-item tag">www.zhipin.com</span></span></a></li><li><a class="level is-mobile" href="https://www.bilibili.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bilibili(B站)</span></span><span class="level-right"><span class="level-item tag">www.bilibili.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://moon-sea.oss-cn-shanghai.aliyuncs.com/blog_images/head.png" alt="BeiBei-Blog" height="28"></a><p class="is-size-7"><span>&copy; 2023 John Doe</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span></p><p class="is-size-7">© 2030</p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>